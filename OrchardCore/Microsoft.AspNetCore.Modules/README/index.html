
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.6.1">
    
    
      
        <title>ASP.NET Core Modules - Orchard Core Documentation</title>
      
    
    
      <script src="../../../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application-4d0d3f2fbf.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-f78e5cb881.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open Sans:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="green" data-md-color-accent="light-blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../../.." title="Orchard Core Documentation" class="md-logo md-header-nav__button">
            <img src="../../../images/orchard-logo.png" width="24" height="24">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
            
            ASP.NET Core Modules
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
            


  


  <a href="https://github.com/OrchardCMS/Orchard2" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      OrchardCMS/Orchard2
    </div>
  </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-logo md-nav__button">
        <img src="../../../images/orchard-logo.png">
      </i>
    
    Orchard Core Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/OrchardCMS/Orchard2" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      OrchardCMS/Orchard2
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="About Orchard Core" class="md-nav__link">
      About Orchard Core
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        ASP.NET Core Modules
      </label>
    
    <a href="./" title="ASP.NET Core Modules" class="md-nav__link md-nav__link--active">
      ASP.NET Core Modules
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" title="Getting started" class="md-nav__link">
    Getting started
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-extra-locations" title="Add Extra Locations" class="md-nav__link">
    Add Extra Locations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-extra-manifest-filenames" title="Add Extra Manifest filenames" class="md-nav__link">
    Add Extra Manifest filenames
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-framework" title="Additional framework" class="md-nav__link">
    Additional framework
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aspnet-mvc" title="Asp.Net Mvc" class="md-nav__link">
    Asp.Net Mvc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nancyfx" title="NancyFx" class="md-nav__link">
    NancyFx
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      CMS Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        CMS Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OrchardCore.Modules/Orchard.Body/README/" title="Body" class="md-nav__link">
      Body
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OrchardCore.Modules/Orchard.ContentFields/README/" title="Content Fields" class="md-nav__link">
      Content Fields
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OrchardCore.Modules/Orchard.ContentPreview/README/" title="Content Preview" class="md-nav__link">
      Content Preview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OrchardCore.Modules/Orchard.ContentTypes/README/" title="Content Types" class="md-nav__link">
      Content Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OrchardCore.Modules/Orchard.Markdown/README/" title="Markdown" class="md-nav__link">
      Markdown
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OrchardCore.Modules/Orchard.Menu/README/" title="Menu" class="md-nav__link">
      Menu
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OrchardCore.Modules/Orchard.Navigation/README/" title="Navigation" class="md-nav__link">
      Navigation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Core Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Core Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OrchardCore.Modules/Orchard.DynamicCache/README/" title="Dynamic Cache" class="md-nav__link">
      Dynamic Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OrchardCore.Modules/Orchard.OpenId/README/" title="OpenId" class="md-nav__link">
      OpenId
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OrchardCore.Modules/Orchard.Resources/README/" title="Resources" class="md-nav__link">
      Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OrchardCore.Modules/Orchard.Roles/README/" title="Roles" class="md-nav__link">
      Roles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OrchardCore.Modules/Orchard.Scripting/README/" title="Scripting" class="md-nav__link">
      Scripting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../OrchardCore.Modules/Orchard.Setup/README/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" title="Getting started" class="md-nav__link">
    Getting started
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-extra-locations" title="Add Extra Locations" class="md-nav__link">
    Add Extra Locations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-extra-manifest-filenames" title="Add Extra Manifest filenames" class="md-nav__link">
    Add Extra Manifest filenames
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-framework" title="Additional framework" class="md-nav__link">
    Additional framework
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aspnet-mvc" title="Asp.Net Mvc" class="md-nav__link">
    Asp.Net Mvc
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nancyfx" title="NancyFx" class="md-nav__link">
    NancyFx
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">Link</a></h1>
<p>The library ASP.Net Core Modules provides a mechanism to have a self contained modular system where you can opt in to a specific application framework and not have the design of you application be dictated to by such.</p>
<h2 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permanent link">Link</a></h2>
<p>First, create a brand new web application.</p>
<p>Within this new application we are initially going to focus on two files, <code>project.json</code> and <code>Startup.cs</code>. If you don't have either of these... start again!</p>
<p>Okay so first, let's open up <code>project.json</code>.</p>
<p>Within the ConfigureServices method add these lines:</p>
<div class="codehilite"><pre><span></span><span class="n">services</span><span class="p">.</span><span class="n">AddModuleServices</span><span class="p">(</span><span class="n">configure</span> <span class="p">=&gt;</span> <span class="n">configure</span>
    <span class="p">.</span><span class="n">AddConfiguration</span><span class="p">(</span><span class="n">Configuration</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>


<p>Next, at the end of the Configure method, add these lines:</p>
<div class="codehilite"><pre><span></span><span class="n">app</span><span class="p">.</span><span class="n">UseModules</span><span class="p">();</span>
</pre></div>


<p>That's it. Erm, wait, what? Okay so right now you must be thinking, well what the hell does this do? Good question.</p>
<p>AddModuleServices will add the container middleware to you application pipeline, this means in short that It will look in to a folder called Modules within you application for all folders that contain the mainfest file <code>Module.txt</code>. IF you looked on the file system it would look like this:</p>
<div class="codehilite"><pre><span></span>MyNewWebApplicaion
  \ Modules
    \ Module1
    \ Module2
</pre></div>


<p>Once it has found that manifest file, and said file is valid, it will then look for all classes that inherit off of <code>StartupBase</code>, instansiate them and then call the methods on here. An example of one is:</p>
<div class="codehilite"><pre><span></span><span class="k">public</span> <span class="k">class</span> <span class="nc">Startup</span> <span class="p">:</span> <span class="n">StartupBase</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ConfigureServices</span><span class="p">(</span><span class="n">IServiceCollection</span> <span class="n">services</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">services</span><span class="p">.</span><span class="n">AddScoped</span><span class="p">&lt;</span><span class="n">ISomeInterface</span><span class="p">,</span> <span class="n">SomeImplementedClass</span><span class="p">&gt;();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>By doing this you allow your modules to be self contained, completely decoupled from the Hosting applicaiton.</p>
<blockquote>
<p>Note: If you drop a new module in, then you will need to restart the application for it to be found.</p>
</blockquote>
<h2 id="add-extra-locations">Add Extra Locations<a class="headerlink" href="#add-extra-locations" title="Permanent link">Link</a></h2>
<p>By default module discovery is linked to the <code>Modules</code> folder. This however can be extended.</p>
<p>Within the <code>Startup.cs</code> file in your host, within the <code>ConfigureServices</code> method, add:</p>
<div class="codehilite"><pre><span></span><span class="n">services</span><span class="p">.</span><span class="n">AddExtensionLocation</span><span class="p">(</span><span class="s">&quot;SomeOtherFolderToLookIn&quot;</span><span class="p">);</span>
</pre></div>


<h2 id="add-extra-manifest-filenames">Add Extra Manifest filenames<a class="headerlink" href="#add-extra-manifest-filenames" title="Permanent link">Link</a></h2>
<p>By default the module manifest file is <code>Module.txt</code>. This however can be extended.</p>
<p>Within the <code>Startup.cs</code> file in your host, within the <code>ConfigureServices</code> method, add:</p>
<div class="codehilite"><pre><span></span><span class="n">services</span><span class="p">.</span><span class="n">AddManifestDefinition</span><span class="p">(</span><span class="s">&quot;ManifestMe.txt&quot;</span><span class="p">,</span> <span class="s">&quot;module&quot;</span><span class="p">);</span>
</pre></div>


<h2 id="additional-framework">Additional framework<a class="headerlink" href="#additional-framework" title="Permanent link">Link</a></h2>
<p>You can add your favourite application framework to the pipeline, easily. The below implementations are designed to work side by side, so if you want Asp.Net Mvc and Nancy within your pipeline, just add both.</p>
<p>The modular framework wrappers below are designed to work directly with the modular application framework, so avoid just adding the raw framework and expect it to just work.</p>
<h3 id="aspnet-mvc">Asp.Net Mvc<a class="headerlink" href="#aspnet-mvc" title="Permanent link">Link</a></h3>
<p>Within your hosting application add a reference to <code>Orchard.Mvc.Core</code>.</p>
<p>Next, within <code>Startup.cs</code> modify the method <code>AddModuleServices</code> to look like this:</p>
<div class="codehilite"><pre><span></span><span class="n">services</span><span class="p">.</span><span class="n">AddModuleServices</span><span class="p">(</span><span class="n">configure</span> <span class="p">=&gt;</span> <span class="n">configure</span>
    <span class="p">.</span><span class="n">AddMvcModules</span><span class="p">(</span><span class="n">services</span><span class="p">.</span><span class="n">BuildServiceProvider</span><span class="p">())</span>
    <span class="p">.</span><span class="n">AddConfiguration</span><span class="p">(</span><span class="n">Configuration</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>


<blockquote>
<p>Note the addition of <code>.AddMvcModules(services.BuildServiceProvider())</code></p>
</blockquote>
<p>That's it, done. Asp.Net Mvc is now part of your pipeline.</p>
<h3 id="nancyfx">NancyFx<a class="headerlink" href="#nancyfx" title="Permanent link">Link</a></h3>
<p>Within your hosting application add a reference to <code>Orchard.Nancy.Core</code></p>
<p>Next, within <code>Startup.cs</code> modify the method <code>Configure</code> to look like this:</p>
<div class="codehilite"><pre><span></span><span class="n">app</span><span class="p">.</span><span class="n">UseModules</span><span class="p">(</span><span class="n">modules</span> <span class="p">=&gt;</span> <span class="n">modules</span>
    <span class="p">.</span><span class="n">UseNancyModules</span><span class="p">()</span>
<span class="p">);</span>
</pre></div>


<blockquote>
<p>Note the addition of <code>.UseNancyModules()</code></p>
</blockquote>
<p>That's it, done. NancyFx is now part of your pipeline. What this means is that Nancy modules will be automatically discovered.</p>
<blockquote>
<p>Note. There is no need to register a Nancy Module within its own Startup class.</p>
</blockquote>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../.." title="About Orchard Core" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                About Orchard Core
              </span>
            </div>
          </a>
        
        
          <a href="../../../OrchardCore.Modules/Orchard.Body/README/" title="Body" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Body
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="http://orchardproject.net" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/OrchardCMS" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/OrchardCMS" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application-6b599127bc.js"></script>
      <script>app.initialize({url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>